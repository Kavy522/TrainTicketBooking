<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>
<?import java.net.URL?>
<BorderPane prefHeight="900" prefWidth="1400"
            xmlns="http://javafx.com/javafx/17.0.12"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="trainapp.controller.ui.AdminProfileController">

    <stylesheets>
        <URL value="@../css/AdminProfile.css" />
    </stylesheets>

    <!-- TOP BAR -->
    <top>
        <HBox styleClass="header-bar" alignment="CENTER_LEFT" spacing="0">
            <padding>
                <Insets top="18" bottom="18" left="36" right="36"/>
            </padding>
            <Label styleClass="header-title" text="Tailyatri Admin"/>
            <Label styleClass="header-subtitle" text="Dashboard" />
            <Region HBox.hgrow="ALWAYS"/>
            <Label styleClass="user-welcome" fx:id="adminWelcomeLabel" text="Welcome, admin!"/>
            <Label styleClass="user-role" text="Super Admin"/>
            <Button fx:id="logoutButton" styleClass="btn-logout" text="Logout" onAction="#handleLogout"/>
        </HBox>
    </top>

    <!-- CENTER: MAIN CONTENT -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="main-scroll">
            <VBox styleClass="center-stack" alignment="TOP_CENTER" spacing="56" maxWidth="1380.0">
                <padding>
                    <Insets top="48" bottom="48" left="0" right="0"/>
                </padding>

                <!-- KPI CARDS ROW -->
                <HBox styleClass="stats-row" spacing="40" alignment="CENTER" maxWidth="1380.0">
                    <VBox styleClass="kpi-card" alignment="CENTER" prefWidth="270">
                        <Label styleClass="kpi-icon" text="ðŸ‘¥"/>
                        <Label styleClass="kpi-value" fx:id="totalUsersLabel" text="0"/>
                        <Label styleClass="kpi-label" text="Users"/>
                    </VBox>
                    <VBox styleClass="kpi-card" alignment="CENTER" prefWidth="270">
                        <Label styleClass="kpi-icon" text="ðŸš‚"/>
                        <Label styleClass="kpi-value" fx:id="activeTrainsLabel" text="0"/>
                        <Label styleClass="kpi-label" text="Routes"/>
                    </VBox>
                    <VBox styleClass="kpi-card" alignment="CENTER" prefWidth="270">
                        <Label styleClass="kpi-icon" text="ðŸŽ«"/>
                        <Label styleClass="kpi-value" fx:id="totalBookingsLabel" text="0"/>
                        <Label styleClass="kpi-label" text="Bookings"/>
                    </VBox>
                    <VBox styleClass="kpi-card" alignment="CENTER" prefWidth="270">
                        <Label styleClass="kpi-icon" text="ðŸ’°"/>
                        <Label styleClass="kpi-value" fx:id="revenueLabel" text="0"/>
                        <Label styleClass="kpi-label" text="Revenue"/>
                    </VBox>
                </HBox>

                <!-- QUICK ACTION BUTTONS -->
                <HBox styleClass="quick-actions-row" spacing="40" alignment="CENTER" maxWidth="1380.0">
                    <Button styleClass="action-card" maxWidth="250" minWidth="200" onAction="#handleTrainManagement">
                        <graphic>
                            <VBox alignment="CENTER" spacing="10">
                                <Label styleClass="action-icon" text="ðŸš„"/>
                                <Label styleClass="action-title" text="Fleet Management"/>
                                <Label styleClass="action-desc" text="Trains &amp; Schedules"/>
                            </VBox>
                        </graphic>
                    </Button>
                    <Button styleClass="action-card" maxWidth="250" minWidth="200" onAction="#handleUserManagement">
                        <graphic>
                            <VBox alignment="CENTER" spacing="10">
                                <Label styleClass="action-icon" text="ðŸ‘¤"/>
                                <Label styleClass="action-title" text="User Control"/>
                                <Label styleClass="action-desc" text="Accounts"/>
                            </VBox>
                        </graphic>
                    </Button>
                    <Button styleClass="action-card" maxWidth="250" minWidth="200" onAction="#handleBookingManagement">
                        <graphic>
                            <VBox alignment="CENTER" spacing="10">
                                <Label styleClass="action-icon" text="ðŸŽ«"/>
                                <Label styleClass="action-title" text="Reservations"/>
                                <Label styleClass="action-desc" text="Booking &amp; Cancel"/>
                            </VBox>
                        </graphic>
                    </Button>
                    <Button styleClass="action-card" maxWidth="250" minWidth="200" onAction="#handleStationManagement">
                        <graphic>
                            <VBox alignment="CENTER" spacing="10">
                                <Label styleClass="action-icon" text="ðŸš‰"/>
                                <Label styleClass="action-title" text="Station Network"/>
                                <Label styleClass="action-desc" text="Stations &amp; Routes"/>
                            </VBox>
                        </graphic>
                    </Button>
                </HBox>

                <!-- PRICING PANEL -->
                <VBox styleClass="pricing-card" alignment="CENTER" spacing="40" maxWidth="720.0">
                    <padding>
                        <Insets top="24" bottom="24" left="28" right="28"/>
                    </padding>
                    <HBox spacing="18" alignment="CENTER_LEFT">
                        <Label styleClass="pricing-icon" text="ðŸ’¸"/>
                        <Label styleClass="pricing-title" text="Dynamic Pricing Engine"/>
                    </HBox>
                    <Label styleClass="pricing-desc" text="Set fares by class &amp; distance"/>
                    <ListView fx:id="fareStructureListView" styleClass="pricing-list" prefHeight="220" maxWidth="690"/>
                    <HBox spacing="18" alignment="CENTER">
                        <ComboBox fx:id="classComboBox" promptText="Class" minWidth="120" maxWidth="140" styleClass="pricing-input"/>
                        <TextField fx:id="distanceField" promptText="Distance" minWidth="130" maxWidth="150" styleClass="pricing-input"/>
                        <TextField fx:id="fareField" promptText="Fare" minWidth="130" maxWidth="150" styleClass="pricing-input"/>
                        <Button styleClass="pricing-btn" text="Update" onAction="#handleSetFare"/>
                        <Button styleClass="pricing-btn-alt" text="Auto-Optimize" onAction="#handleOptimizePricing"/>
                    </HBox>
                </VBox>
            </VBox>
        </ScrollPane>
    </center>

    <!-- BOTTOM STATUS BAR -->
    <bottom>
        <HBox styleClass="status-bar" spacing="16" alignment="CENTER_LEFT">
            <padding>
                <Insets top="20" bottom="20" left="32" right="32"/>
            </padding>
            <Label styleClass="status-indicator online"/>
            <Label styleClass="status-label" text="System Online"/>
            <Label styleClass="status-label" text="|"/>
            <Label styleClass="status-label" text="Database: Connected"/>
            <Label styleClass="status-label" text="|"/>
            <Label styleClass="status-label" text="API: OK"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label styleClass="status-label" text="Last Refresh:"/>
            <Label fx:id="lastUpdateLabel" styleClass="status-time" text="Now"/>
        </HBox>
    </bottom>

    <!-- Floating message -->
    <Label fx:id="messageLabel" styleClass="floating-message" managed="false" visible="false"
           BorderPane.alignment="BOTTOM_CENTER"/>
</BorderPane>